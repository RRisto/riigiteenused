library(riigiteenused)
library(riigiteenused)
library(devtools)
install_github("RRisto", "riigiteenused")
library(devtools)
install_github("Risto Hinno", "riigiteenused")
library(devtools)
install_github("riigiteenused/RRisto", "riigiteenused")
library(riigiteenused)
library(riigiteenused)
package.skeleton(name="linmod", code_files=c("andmedSisse.R", "andmedPikaks.R", "meltimine.R","korrastaja.R"))
library(riigiteenused)
library(devtools)
install_github("RRisto/riigiteenused", "riigiteenused")
proov=andmedSisse()
install_github("RRisto", "riigiteenused")
install_github("riigiteenused", "RRisto")
andmedSisse()
?riigiteenused
?\riigiteenused
??riigiteenused
andmedSisse("www.riigiteenused.ee")
library(riigiteenused)
proov=andmedSisse("https://www.riigiteenused.ee/api/et/all")
View(proov)
class(proov$regulatsioon)
url="https://www.riigiteenused.ee/api/et/all"
library(jsonlite)
library(data.table)
andmed=fromJSON(readLines(url), flatten=T)
View(andmed)
andmed=fromJSON(readLines(url), flatten=T)
write.csv(proov[,1:20],"proov.csv", row.names = F, sep";")
write.table(proov[,1:20],"proov.csv", row.names = F, sep";")
write.table(proov[,1:20],"proov.csv", row.names = F, sep=";")
write.table(andmed[,1:20],"proov.csv", row.names = F, sep";")
write.table(andmed[,1:20],"proov.csv", row.names = F, sep=";")
write.table(andmed[,1:20],"proov.csv", row.names = F)
write.table(andmed[,1:20],"proov.csv", row.names = F, sep=",")
andmed=fromJSON(readLines(url), flatten=T)
andmed=andmed["teenuste_kanalid_ja_moodikud"!="list()"]
andmedMoodik <- rbindlist(lapply(andmed[["teenuste_kanalid_ja_moodikud"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
View(andmedMoodik)
andmedSisse=function(url) {
#loeme andmed sisse
library(jsonlite)
library(data.table)
andmed=fromJSON(readLines(url), flatten=T)
andmed=andmed["teenuste_kanalid_ja_moodikud"!="list()"]
andmedMoodik <- rbindlist(lapply(andmed[["teenuste_kanalid_ja_moodikud"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
andmed
}
proov2=andmedSisse(url)
andmed=andmed["regulatsioon"!="list()"]
andmedRegulatsioon <- rbindlist(lapply(andmed[["regulatsioon"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
View(andmed)
andmed$regulatsioon
andmed=fromJSON(readLines(url), flatten=T)
View(andmed)
andmed=fromJSON(readLines(url), flatten=T)
View(andmed)
install.packages(riigiteenused)
library(devtools)
install_github("RRisto/riigiteenused")
library(riigiteenused)
proov=andmedSisse(url)
install_github("RRisto/riigiteenused")
proov=andmedSisse(url)
View(proov2)
write.table(proov, "proov.csv")
regul=unlist(proov$regulatsioon)
regul
length(unique(regul))
data.frame(lapply(proov$regulatsioon, function(x) unlist(x)))
data.frame(lapply(proov, function(x) unlist(x)))
proov$regul = unlist(proov$regulatsioon)
andmedMoodik <- rbindlist(lapply(andmed[["regulatsioon"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
andmed=andmed["regulatsioon"!="list()"]
andmedMoodik <- rbindlist(lapply(andmed[["teenuste_kanalid_ja_moodikud"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
andmed=andmed["regulatsioon"!="list()"]
andmedMoodik <- rbindlist(lapply(andmed[["regulatsioon"]], function(x) {
as.list(unlist(x))
}), fill=TRUE)
proov=andmedSisse(url)
proov$regulatsioon=NULL
write.table(proov, "riigiteenused.csv", sep=",", row.names = F)
proov$sihtgrupp=NULL
write.table(proov, "riigiteenused.csv", sep=",", row.names = F)
andmedSisse=function(url) {
#loeme andmed sisse
library(rsjon)
library(jsonlite)
fromJSON(url, flatten=T)
}
proov=andmedSisse("https://www.riigiteenused.ee/api/et/all")
install.packages("rjson")
proov=andmedSisse("https://www.riigiteenused.ee/api/et/all")
andmedSisse=function(url) {
#loeme andmed sisse
library(rjson)
library(jsonlite)
fromJSON(url, flatten=T)
}
proov=andmedSisse("https://www.riigiteenused.ee/api/et/all")
library(devtools)
install_github("RRisto/riigiteenused")
library(riigiteenused)
andmedLai=andmedSisse("https://www.riigiteenused.ee/api/et/all")
andmedPikk=andmedPikaks(andmedLai)
proov=andmedSisse("https://www.riigiteenused.ee/api/et/all")
names(proov)
meltimine=function(kanal, data) {
library(reshape2)
#leiame ainult seda kanalit puudutavad muutujad
sub=data[, grepl(paste(kanal, "|identifikaator|ministeerium|allasutus|tegevusvaldkond|teenusetyyp|makse", sep=""), names(data))]
#määran id-d, mis meltimisel meltimata jäävad
id=grep(c("identifikaator|ministeerium|allasutus|tegevusvaldkond|teenusetyyp|makse|link"), names(sub), value=T)
#kui selle kanali kohta stati pole, anna vastuseks null
if(length(id)<7) {
tulem=NULL
} else {
#meldime andmed kitsaks
tulem=melt(sub, id=id)
#muudan variable nime ära, mis on kanalispets, muidu ei saa rbindida
names(tulem)=c("identifikaator", "tegevusvaldkond", "tyyp", "ministeerium", "allasutus",
"makse", "link",  "variable",
"value")
}
tulem
}
lett=meltimine("Letiteenus büroos.", data=proov) #shiny jaoks vaja
View(lett)
(75+75+25)/3
p
iconv("Tekstisõnum.", "UTF-8")
enc2utf8("Tekstisõnum")
enc2utf8("Tekstisõnum")
enc2utf8("Tekstisõnum.")
library(riigiteenused)
library(riigiteenused)
library(riigiteenused)
library(riigiteenused)
library(riigiteenused)
library(riigiteenused)
library(riigiteenused)
